(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{274:function(e,t,n){e.exports=n.p+"img/cudua-logo-icon.c64cfb8.svg"},278:function(e,t,n){e.exports=n.p+"img/banner-image.e4389c3.jpg"},328:function(e,t,n){"use strict";n.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sign-up-logo"},[t("img",{attrs:{src:n(274)}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"instruction-area"},[t("div",{staticClass:"intent-bg-text"},[this._v("Create an online store for your business")]),this._v(" "),t("div",{staticClass:"sign-up-banner"},[t("img",{attrs:{src:n(278),alt:""}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loader-action"},[t("span",{staticClass:"loader"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sign-up-bottom-links"},[t("a",{attrs:{href:"#"}},[this._v("Contact support")]),this._v(" "),t("a",{attrs:{href:"#"}},[this._v("Privacy | Terms")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sign-up-logo"},[t("img",{attrs:{src:n(274)}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loader-action"},[t("span",{staticClass:"loader"})])}],o=(n(34),n(16),n(17),n(12),n(29),n(37),n(8)),l=(n(175),n(9)),c=n(15),d=n(53),m=n(125);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f,D,w,C={name:"CREATEBUSINESS",components:{NOTIFICATION:n(126).a},data:function(){return{loginEmail:"",loginPassword:"",loginIsDisabled:!1,isLoggedIn:!1,fullname:"",email:"",password:"",businessName:"",username:"",customerFullname:"",anonymousId:"",accessToken:"",error:0,isDisabled:!1}},created:function(){window.addEventListener("resize",this.handleResize)},computed:v(v({},Object(c.c)({GetAnonymousId:"customer/GetAnonymousId",GetLoginStatus:"customer/GetLoginStatus",GetCustomerDetails:"customer/GetCustomerDetails"})),{},{handleResize:function(){this.screenWidth=window.innerWidth},LoginStatus:function(){this.isLoggedIn=this.GetLoginStatus,this.anonymousId=this.GetAnonymousId}}),methods:{validateBusiness:function(){this.error=0,this.isLoggedIn||(this.error=0,this.fullname.length<3?(this.$addRedBorder("signUpFullname"),this.$outputValidationError("fullnameValidationError","Your fullname must be greater than 2 characters"),this.error=1):(this.$removeRedBorder("signUpFullname"),this.$removeValidationError("fullnameValidationError")),this.email.length<5?(this.$addRedBorder("signUpEmail"),this.$outputValidationError("emailValidationError","Enter a valid email address"),this.error=1):(this.$removeRedBorder("signUpEmail"),this.$removeValidationError("emailValidationError")),this.password.length<6?(this.$addRedBorder("signUpPassword"),this.$outputValidationError("passwordValidationError","Your password must be greater than 5 characters"),this.error=1):(this.$removeRedBorder("signUpPassword"),this.$removeValidationError("passwordValidationError"))),this.validateUsernameAndBusinessName(),this.error?this.$showToast("An input error occurred. Find error and make corrections to continue","error"):(this.isDisabled=!0,this.isLoggedIn?this.createBusinessForSignedUser():this.createBusinessForUnsignedUser())},validateUsernameAndBusinessName:function(){(this.businessName.length<=3?(this.$addRedBorder("signUpBusinessName"),this.$outputValidationError("businessNameValidationError","Your business name must be greater than 3 characters"),this.error=1):(this.$removeRedBorder("signUpBusinessName"),this.$removeValidationError("businessNameValidationError")),this.username.length<=3)?(this.$addRedBorder("signUpUsername"),this.$outputValidationError("usernameValidationError","Your business username must be greater than 3 characters"),this.error=1):0==new RegExp(/^(?!.*\.\.\s)(?!.*\.$)[^\W][\w.]{0,29}$/gi).test(this.username)?(this.error=1,this.$addRedBorder("signUpUsername"),this.$outputValidationError("usernameValidationError",'Your username must not have any space and any character like\n                    <span>\n                        / " ` @ - | +\n                    </span>')):(this.$removeRedBorder("signUpUsername"),this.$removeValidationError("usernameValidationError"))},createBusinessForSignedUser:(w=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$apollo.mutate({mutation:d.a,variables:{name:this.businessName,username:this.username},context:{headers:{accessToken:this.accessToken}}});case 3:if(0!=(t=(t=e.sent).data.CreateBusinessAccount).success){e.next=9;break}return this.isDisabled=!1,this.$initiateNotification("error","An error occurred",t.message),e.abrupt("return");case 9:null!=t.businessDetails&&this.$store.commit("business/setBusinessData",{businessId:null!=t.businessDetails.id?t.businessDetails.id:"",businessName:null!=t.businessDetails.businessname?t.businessDetails.businessname:"",username:null!=t.businessDetails.username?t.businessDetails.username:""}),this.$initiateNotification("success","Sign in successful",t.message),setTimeout((function(){window.location.assign("/b")}),1e3),e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(0),this.isDisabled=!1,this.$initiateNotification("error","Failed request","A network error occurred"),e.abrupt("return");case 19:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return w.apply(this,arguments)}),createBusinessForUnsignedUser:(D=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$apollo.mutate({mutation:m.a,variables:{fullname:this.fullname,email:this.email,password:this.password,anonymousId:this.anonymousId,name:this.businessName,username:this.username},context:{headers:{accessToken:this.accessToken}}});case 3:if(0!=(t=(t=e.sent).data.createUserAndBusiness).success){e.next=9;break}return this.isDisabled=!1,this.$initiateNotification("error","An error occurred",t.message),e.abrupt("return");case 9:this.$store.commit("customer/changeLoginStatus",!0),this.$store.commit("customer/setCustomerData",{fullname:t.userData.fullname,email:t.userData.email,userId:t.userData.userId,userToken:t.userData.accessToken}),this.$store.commit("business/setBusinessData",{businessId:t.businessDetails.id,businessName:t.businessDetails.businessname,username:t.businessDetails.username}),localStorage.removeItem("CUDUA_ANONYMOUS_ID"),this.$store.commit("customer/setAnonymousId",""),this.$initiateNotification("success","Online shop created",t.message),setTimeout((function(){window.location.assign("/b")}),1e3),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(0),this.isDisabled=!1,this.$initiateNotification("error","Failed request","A network error occurred"),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return D.apply(this,arguments)}),showUsernameUrlMethod:function(e){this.$removeValidationError("usernameValidationError")},showSignInBox:function(){document.querySelector("body").classList.add("overflow-hidden"),document.getElementById("signInModal").classList.add("is-active")},hideSignInBox:function(){document.querySelector("body").classList.remove("overflow-hidden"),document.getElementById("signInModal").classList.remove("is-active")},validateUserLogin:(f=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.loginEmail.length<2||this.loginPassword.length<2)){e.next=3;break}return this.$showToast("Enter your email and password credentials to sign in","error"),e.abrupt("return");case 3:return this.loginIsDisabled=!0,e.prev=4,e.next=7,this.$apollo.query({query:m.d,variables:{email:this.loginEmail,password:this.loginPassword,anonymousId:this.anonymousId}});case 7:if(t=e.sent,0!=(n=t.data.userLogin).success){e.next=13;break}return this.loginIsDisabled=!1,this.$initiateNotification("error","Failed login",n.message),e.abrupt("return");case 13:if(this.$store.dispatch("customer/changeLoginStatus",!0),this.accessToken=n.accessToken,this.customerFullname=n.userDetails.fullname,this.LoginStatus,localStorage.removeItem("CUDUA_ANONYMOUS_ID"),this.$store.dispatch("customer/setAnonymousId",""),this.loginIsDisabled=!0,null==n.businessDetails){e.next=26;break}return this.setCustomerData(n),this.setBusinessData(n),this.$initiateNotification("success","Sign in successful",n.message),setTimeout((function(){r.$router.push("/b")}),1e3),e.abrupt("return");case 26:this.setCustomerData(n),this.$initiateNotification("success","Sign in successful","".concat(n.message,". You can now create your online store")),this.hideSignInBox(),e.next=36;break;case 31:return e.prev=31,e.t0=e.catch(4),this.loginIsDisabled=!1,this.$initiateNotification("error","Failed request","A network error occurred"),e.abrupt("return");case 36:case"end":return e.stop()}}),e,this,[[4,31]])}))),function(){return f.apply(this,arguments)}),setBusinessData:function(e){this.$store.dispatch("business/setBusinessData",{businessId:null!=e.businessDetails.id?e.businessDetails.id:"",businessName:null!=e.businessDetails.businessname?e.businessDetails.businessname:"",username:null!=e.businessDetails.username?e.businessDetails.username:"",logo:null!=e.businessDetails.logo?e.businessDetails.logo:"",coverPhoto:null!=e.businessDetails.coverPhoto?e.businessDetails.coverPhoto:"",description:null!=e.businessDetails.description?e.businessDetails.description:"",reviewScore:null!=e.userDetails.review?e.userDetails.review:0}),null!=e.businessDetails.contact&&this.$store.dispatch("business/setBusinessContact",{email:null!=e.businessDetails.contact.email?e.businessDetails.contact.email:"",phone:null!=e.businessDetails.contact.phone?e.businessDetails.contact.phone:[],whatsapp:{phone:e.businessDetails.contact.whatsapp.number,status:e.businessDetails.contact.whatsapp.status}}),null!=e.businessDetails.address&&this.$store.dispatch("business/setBusinessAddress",{number:null!=e.businessDetails.address.number?e.businessDetails.address.number:"",busStop:null!=e.businessDetails.address.busStop?e.businessDetails.address.busStop:"",street:null!=e.businessDetails.address.street?e.businessDetails.address.street:"",community:null!=e.businessDetails.address.community?e.businessDetails.address.community:"",lga:null!=e.businessDetails.address.lga?e.businessDetails.address.lga:"",state:null!=e.businessDetails.address.state?e.businessDetails.address.state:"",country:null!=e.businessDetails.address.country?e.businessDetails.address.country:""}),null!=e.businessDetails.businessCategories&&this.$store.dispatch("business/setBusinessCategories",e.businessDetails.businessCategories)},setCustomerData:function(e){this.$store.dispatch("customer/setCustomerData",{fullname:null!=e.userDetails.fullname?e.userDetails.fullname:"",email:null!=e.userDetails.email?e.userDetails.email:"",userId:null!=e.userDetails.userId?e.userDetails.userId:"",phone:null!=e.userDetails.phone?e.userDetails.phone:"",reviewScore:null!=e.userDetails.review?e.userDetails.review:0,displayPicture:null!=e.userDetails.displayPicture?e.userDetails.displayPicture:"",userToken:e.accessToken,emailNotification:e.userDetails.email_notification})},getUserDataFromStore:function(){this.customerFullname=this.GetCustomerDetails.fullname,this.accessToken=this.GetCustomerDetails.userToken}},mounted:function(){document.querySelector("body").classList.remove("overflow-hidden"),this.LoginStatus,this.isLoggedIn&&this.getUserDataFromStore()}},_=n(7),component=Object(_.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customer"},[n("div",{attrs:{id:"fb-root"}}),e._v(" "),n("script",{attrs:{async:"",defer:"",crossorigin:"anonymous",src:"https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v8.0&appId=1380709488802204&autoLogAppEvents=1",nonce:"LDvgUfm5"}}),e._v(" "),n("div",{staticClass:"body-container"},[n("div",{staticClass:"sign-up-container"},[n("div",{staticClass:"sign-up-logo-container"},[e._m(0),e._v(" "),n("n-link",{staticClass:"btn btn-primary",attrs:{to:"/"}},[e._v("Home")])],1),e._v(" "),n("div",{staticClass:"sign-up-content"},[e._m(1),e._v(" "),n("div",{staticClass:"sign-up-form-layer"},[n("div",{staticClass:"sign-up-form-wrapper"},[n("div",{staticClass:"create-business-signup"},[e.isLoggedIn?e._e():n("div",{staticClass:"d-flex-between mg-bottom-32 personal-acct-action"},[n("div",{staticClass:"action-text"},[e._v(" I already have a personal account. Sign in before creating your online store")]),e._v(" "),n("button",{staticClass:"btn btn-md btn-white",on:{click:e.showSignInBox}},[e._v("Sign in")])]),e._v(" "),e.isLoggedIn?n("div",{staticClass:"d-flex-between mg-bottom-16 personal-acct-action"},[n("div",{staticClass:"action-text"},[e._v("You are signed into your personal account as "),n("span",[e._v(e._s(e.customerFullname))])])]):e._e(),e._v(" "),e.isLoggedIn?e._e():n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.fullname,expression:"fullname"}],staticClass:"input-form",attrs:{type:"text",name:"fullname",id:"signUpFullname",placeholder:"Fullname"},domProps:{value:e.fullname},on:{input:function(t){t.target.composing||(e.fullname=t.target.value)}}}),e._v(" "),n("div",{staticClass:"validation-error-design",attrs:{id:"fullnameValidationError","data-error":"error"}})]),e._v(" "),n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.businessName,expression:"businessName"}],staticClass:"input-form",attrs:{type:"text",name:"businessname",id:"signUpBusinessName",placeholder:"Business name"},domProps:{value:e.businessName},on:{input:function(t){t.target.composing||(e.businessName=t.target.value)}}}),e._v(" "),n("div",{staticClass:"validation-error-design",attrs:{id:"businessNameValidationError","data-error":"error"}})]),e._v(" "),n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input-form",attrs:{type:"text",name:"username",id:"signUpUsername",placeholder:"Username",autocomplete:"false"},domProps:{value:e.username},on:{focus:function(t){return e.showUsernameUrlMethod(!0)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),e.username?n("div",{staticClass:"username-url-sample"},[e._v("https://www.cudua.com/"),n("span",[e._v(e._s(e.username))])]):e._e(),e._v(" "),n("div",{staticClass:"validation-error-design",attrs:{id:"usernameValidationError","data-error":"error"}})]),e._v(" "),e.isLoggedIn?e._e():n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input-form",attrs:{type:"email",name:"email",id:"signUpEmail",placeholder:"Email address"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),n("div",{staticClass:"validation-error-design",attrs:{id:"emailValidationError","data-error":"error"}})]),e._v(" "),e.isLoggedIn?e._e():n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-form",attrs:{type:"password",name:"password",id:"signUpPassword",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("div",{staticClass:"validation-error-design",attrs:{id:"passwordValidationError","data-error":"error"}})]),e._v(" "),n("div",{staticClass:"form-control"},[n("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button",disabled:e.isDisabled},on:{click:e.validateBusiness}},[e._v("\n                                          Create online shop\n                                          "),e._m(2)])])])])])]),e._v(" "),e._m(3),e._v(" "),n("NOTIFICATION")],1)]),e._v(" "),n("div",{staticClass:"sign-in-cover-modal",attrs:{id:"signInModal"}},[n("div",{staticClass:"sign-up-logo-container"},[e._m(4),e._v(" "),n("button",{staticClass:"close-modal-btn"},[n("div",{staticClass:"dropdownCheckBox",on:{click:e.hideSignInBox}}),e._v(" "),n("svg",{staticClass:"margin-unset",attrs:{"data-v-2478c6c0":"",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14"}},[n("use",{attrs:{"data-v-2478c6c0":"","xlink:href":"/_nuxt/assets/business/image/all-svg.svg#times"}})])])]),e._v(" "),n("div",{staticClass:"modal-signin-body"},[n("div",{staticClass:"intent-bg-text"},[e._v("Sign into your account")]),e._v(" "),n("div",{staticClass:"form-area"},[n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginEmail,expression:"loginEmail"}],staticClass:"input-form",attrs:{type:"email",name:"email",placeholder:"Email address"},domProps:{value:e.loginEmail},on:{input:function(t){t.target.composing||(e.loginEmail=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPassword,expression:"loginPassword"}],staticClass:"input-form",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.loginPassword},on:{input:function(t){t.target.composing||(e.loginPassword=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-control "},[n("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button",disabled:e.loginIsDisabled},on:{click:e.validateUserLogin}},[e._v("\n                          Sign in\n                          "),e._m(5)]),e._v(" "),n("div",{staticClass:"fg-password"},[n("n-link",{attrs:{to:"/auth/forgot-password"}},[e._v("Forgot Password?")])],1)])])])])])}),r,!1,null,null,null);t.default=component.exports}}]);