(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{331:function(t,e,r){"use strict";r.r(e);r(34),r(16),r(17),r(12),r(29);var n=r(9),o=(r(37),r(8)),c=r(116),d=r(118),l=r(117),h=r(272),v=r(53),y=r(15);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _,C,w,I={name:"BUSINESSCATEGORIES",components:{TOPHEADER:c.a,SIDENAV:d.a,BOTTOMNAV:l.a,PAGELOADER:h.a},data:function(){return{pageLoader:!0,businessId:"",accessToken:"",categoriesList:"",categoryListCount:0,isLoading:!0}},created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initComponentData(),e.next=4,t.getBusinessCategoryList();case 4:case"end":return e.stop()}}),e)})))()},methods:f(f({},Object(y.c)({GetBusinessData:"business/GetBusinessDetails",GetCustomerData:"customer/GetCustomerDetails"})),{},{initComponentData:function(){var t=this.GetBusinessData(),e=this.GetCustomerData();this.businessId=t.businessId,this.accessToken=e.userToken},getBusinessCategoryList:(w=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$apollo.query({query:v.i,variables:{businessId:this.businessId},context:{headers:{accessToken:this.accessToken}}});case 3:if(0!=(e=t.sent).success){t.next=8;break}return this.categoryListCount=0,this.$initiateNotification("error","Failed request","A network error occurred"),t.abrupt("return");case 8:null!=(r=e.data.GetBusinessCategoriesWithSubcategory.businessCategory)&&(this.categoryListCount=r.length,this.categoriesList=r),this.isLoading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),this.categoryListCount=0,this.$initiateNotification("error","Failed request","A network error occurred");case 17:case"end":return t.stop()}}),t,this,[[0,13]])}))),function(){return w.apply(this,arguments)}),showCategory:function(){},hideCategory:function(){},hideSubcategory:(C=Object(o.a)(regeneratorRuntime.mark((function t(e,r,n,o){var c,d,l,h,y,m,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.preventDefault(),(c=document.getElementById("hide"+e)).disabled=!0,d={subcategoryId:r,categoryId:n,businessId:this.businessId},l={headers:{accessToken:this.accessToken}},t.next=7,this.$performGraphQlMutation(this.$apollo,v.o,d,l);case 7:if(1!=(h=t.sent).error){t.next=13;break}c.disabled=!1,this.$initiateNotification("error","Failed request",h.message),t.next=25;break;case 13:if(!(y=h.result.data.HideSelectedBusinessSubcategory).success){t.next=23;break}return this.$initiateNotification("success","Subcategory hidden",y.message),c.disabled=!1,c.classList.add("display-none"),m=document.getElementById("show"+e),f=document.getElementById("tag"+e),m.classList.remove("display-none"),f.classList.remove("display-none"),t.abrupt("return");case 23:c.disabled=!1,this.$initiateNotification("error","Failed request",y.message);case 25:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return C.apply(this,arguments)}),showSubcategory:(_=Object(o.a)(regeneratorRuntime.mark((function t(e,r,n,o){var c,d,l,h,y,m,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.preventDefault(),(c=document.getElementById("show"+e)).disabled=!0,d={subcategoryId:r,categoryId:n,businessId:this.businessId},l={headers:{accessToken:this.accessToken}},t.next=7,this.$performGraphQlMutation(this.$apollo,v.q,d,l);case 7:if(1!=(h=t.sent).error){t.next=13;break}c.disabled=!1,this.$initiateNotification("error","Failed request",h.message),t.next=25;break;case 13:if(!(y=h.result.data.ShowSelectedBusinessSubcategory).success){t.next=23;break}return this.$initiateNotification("success","Subcategory visible",y.message),c.disabled=!1,c.classList.add("display-none"),m=document.getElementById("hide"+e),f=document.getElementById("tag"+e),m.classList.remove("display-none"),f.classList.add("display-none"),t.abrupt("return");case 23:c.disabled=!1,this.$initiateNotification("error","Failed request",y.message);case 25:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return _.apply(this,arguments)}),showSubcategoryPane:function(element,t){t.preventDefault();var e=document.getElementById(element),r=document.getElementById("svg"+element);e.classList.toggle("showEffect"),r.classList.toggle("transform-svg")}}),computed:{businessCategories:function(){return this.categoriesList}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.pageLoader=!1;case 1:case"end":return e.stop()}}),e)})))()}},k=r(7),component=Object(k.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"business"},[n("div",{staticClass:"body-container"},[n("TOPHEADER"),t._v(" "),n("nuxt"),t._v(" "),n("div",{staticClass:"content-container"},[n("SIDENAV"),t._v(" "),n("nuxt"),t._v(" "),n("div",{staticClass:"content-area"},[t.pageLoader?n("PAGELOADER"):t._e(),t._v(" "),n("nuxt"),t._v(" "),n("div",{staticClass:"main-content"},[t._m(0),t._v(" "),t._l(t.categoriesList,(function(e,o){return n("div",{key:e.categoryId,staticClass:"accordion grey-bg-color border-radius-4"},[n("div",{staticClass:"accordion-header"},[n("a",{staticClass:"d-flex flex-between",attrs:{href:"#"}},[n("input",{staticClass:"dropdownCheckBox",attrs:{type:"checkbox"},on:{click:function(r){return t.showSubcategoryPane(""+e.itemId+o,r)}}}),t._v(" "),n("h4",[t._v(t._s(e.categoryName))]),t._v(" "),n("svg",{class:{"transform-svg":!o},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22.05 13.616",id:"svg"+e.itemId+o}},[n("use",{attrs:{"xlink:href":r(1)+"#arrowDown"}})])])]),t._v(" "),n("div",{staticClass:"accordion-content-container",class:{showEffect:!o},attrs:{id:""+e.itemId+o}},[n("div",{staticClass:"row"},t._l(e.subcategory,(function(r){return n("div",{key:r.subcategoryId,staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},[n("div",{staticClass:"product-card"},[n("n-link",{staticClass:"category-name-area",attrs:{to:"/b/product/subcategory/"+r.subcategoryId}},[n("div",{staticClass:"visibility-status",class:{"display-none":!r.hide},attrs:{id:"tag"+r.itemId}},[t._v("Hidden")]),t._v(" "),n("h3",[t._v(t._s(r.subcategoryName))]),t._v(" "),r.subcategoryProductCount?t._e():n("div",{staticClass:"subcat-details"},[t._v("No product in this subcategory")]),t._v(" "),1==r.subcategoryProductCount?n("div",{staticClass:"subcat-details"},[t._v("1 product in this subcategory")]):t._e(),t._v(" "),r.subcategoryProductCount>1?n("div",{staticClass:"subcat-details"},[t._v(t._s(r.subcategoryProductCount)+" products in this subcategory")]):t._e()]),t._v(" "),n("div",{staticClass:"subcat-action-area"},[n("n-link",{staticClass:"btn btn-white btn-small",attrs:{to:"/b/product/add-product?sub="+r.subcategoryId+"&cat="+e.categoryId}},[t._v("Add product")]),t._v(" "),n("button",{staticClass:"btn btn-light-grey btn-small",class:{"display-none":r.hide},attrs:{id:"hide"+r.itemId},on:{click:function(n){return t.hideSubcategory(r.itemId,r.subcategoryId,e.categoryId,n)}}},[t._v("\n                                                            Hide\n                                                            "),t._m(1,!0)]),t._v(" "),n("button",{staticClass:"btn btn-light-grey btn-small",class:{"display-none":!r.hide},attrs:{id:"show"+r.itemId},on:{click:function(n){return t.showSubcategory(r.itemId,r.subcategoryId,e.categoryId,n)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tShow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),t._m(2,!0)]),t._v(" "),t._m(3,!0)],1)],1)])})),0)])])})),t._v(" "),t.categoryListCount||t.isLoading?t._e():n("div",[n("div",{staticClass:"no-account-category width-100"},[n("h2",[t._v("No category has been added to your store")]),t._v(" "),n("p",[t._v("Categorise the products in your store")]),t._v(" "),n("div",{staticClass:"d-flex"},[n("n-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:"/b/categories/add-Categories"}},[t._v("Add a category")])],1)])])],2),t._v(" "),n("BOTTOMNAV"),t._v(" "),n("nuxt")],1)],1),t._v(" "),t.categoryListCount>0?n("div",{staticClass:"filter-btn-container"},[n("nuxt-link",{staticClass:"close-modal-btn btn-icon btn-primary",attrs:{to:"/b/categories/add-categories"}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[n("use",{attrs:{"xlink:href":r(13)+"#plusSign"}})])])],1):t._e()],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header"},[e("h4",[this._v("Product categories")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loader-action"},[e("span",{staticClass:"loader"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loader-action"},[e("span",{staticClass:"loader"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-light-grey btn-small"},[this._v("\n                                                            Remove\n                                                            "),e("div",{staticClass:"loader-action"},[e("span",{staticClass:"loader"})])])}],!1,null,null,null);e.default=component.exports}}]);