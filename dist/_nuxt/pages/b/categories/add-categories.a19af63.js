(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{322:function(e,t,r){"use strict";r.r(t);r(30),r(32),r(31),r(23),r(26),r(27),r(34),r(16),r(29);var n=r(42),o=(r(17),r(12),r(37),r(8)),c=r(9),l=r(116),d=r(118),f=r(117),v=r(291),y=r(272),h=r(14),m=r(10),C=r.n(m);function S(){var data=Object(h.a)(["\nmutation Create($businessId: String!, $categoryId: String!, $subcategories: [String]!){\n\tCreateBusinessCategory(input:{\n    businessId: $businessId,\n    categoryId: $categoryId,\n    subcategories: $subcategories\n  }) {\n    code\n    success\n    message \n  }\n}\n"]);return S=function(){return data},data}function _(){var data=Object(h.a)(["\nquery {\n  GetAllCategories{\n    category{\n      id\n      categoryName\n      subcategories {\n        subcategoryId\n        subcategoryName\n      }\n    }\n    code\n    success\n    message\n  }\n}\n"]);return _=function(){return data},data}var O=C()(_()),I=C()(S()),w=r(15);function k(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function D(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var E,j,x={name:"ADDCATEGORIES",components:{TOPHEADER:l.a,SIDENAV:d.a,BOTTOMNAV:f.a,ADDCATEGORIESMODAL:v.a,PAGELOADER:y.a},data:function(){return{pageLoader:!0,accessToken:"",businessId:"",allCategories:"",subcategoriesUnderCategories:"",selectedCategoryId:"",selectedCategoryName:"",vendorSelectedSubcategories:""}},computed:{returnCategories:function(){return this.allCategories},returnSubcategoriesOfCategory:function(){return this.subcategoriesUnderCategories},returnVendorSelectedSubcategories:function(){return this.vendorSelectedSubcategories}},methods:N(N({},Object(w.c)({GetCustomerData:"customer/GetCustomerDetails",GetBusinessData:"business/GetBusinessDetails"})),{},{GetBusinessDataFromStore:function(){var e=this.GetBusinessData();this.businessId=e.businessId;var t=this.GetCustomerData();this.accessToken=t.userToken},GetAllCategories:(j=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,o,c,l,d,f,v,y,h,m,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$performGraphQlQuery(this.$apollo,O);case 2:if(!(t=e.sent).error){e.next=6;break}return this.$initiateNotification("error","Failed request",t.message),e.abrupt("return");case 6:if(0!=(r=t.result.data.GetAllCategories).success){e.next=10;break}return this.$initiateNotification("error","Failed request",r.message),e.abrupt("return");case 10:o=[],c=k(r.category.entries());try{for(c.s();!(l=c.n()).done;){d=Object(n.a)(l.value,2),f=d[0],v=d[1],o[f]={categoryId:v.id,categoryName:v.categoryName,subcategory:[]},y=k(v.subcategories.entries());try{for(y.s();!(h=y.n()).done;)(m=Object(n.a)(h.value,2))[0],C=m[1],o[f].subcategory.push({subcategoryId:C.subcategoryId,subcategoryName:C.subcategoryName})}catch(e){y.e(e)}finally{y.f()}}}catch(e){c.e(e)}finally{c.f()}this.allCategories=o;case 14:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)}),onSelectCategory:function(e){var t=e.target.options;if(this.vendorSelectedSubcategories="",t.selectedIndex>-1){var r=e.target.options[e.target.options.selectedIndex];this.selectedCategoryId=r.value,this.selectedCategoryName=r.innerHTML}},addSelectedSubcategory:function(e,t){var r={subcategoryName:e,subcategoryId:t};if(this.returnVendorSelectedSubcategories.length<1)this.vendorSelectedSubcategories=[],this.vendorSelectedSubcategories.push(r);else{var o,c=!1,l=k(this.returnVendorSelectedSubcategories.entries());try{for(l.s();!(o=l.n()).done;){var d=Object(n.a)(o.value,2);d[0];if(t==d[1].subcategoryId){c=!0;break}}}catch(e){l.e(e)}finally{l.f()}0==c&&this.vendorSelectedSubcategories.push(r)}},removeSubcategoryFromVendorSubcategories:function(e){this.vendorSelectedSubcategories.splice(e,1)},removeCategory:function(){this.vendorSelectedSubcategories=""},submitCategory:(E=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,c,l,d,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("submitCategory"),r=[],n=k(this.returnVendorSelectedSubcategories);try{for(n.s();!(o=n.n()).done;)c=o.value,r.push(c.subcategoryId)}catch(e){n.e(e)}finally{n.f()}if(0!=r.length){e.next=7;break}return this.$initiateNotification("error","Category error","kindly select a subcategory to continue"),e.abrupt("return");case 7:return l={businessId:this.businessId,categoryId:this.selectedCategoryId,subcategories:r},d={headers:{accessToken:this.accessToken}},t.disabled=!0,e.next=12,this.$performGraphQlMutation(this.$apollo,I,l,d);case 12:if(f=e.sent,t.disabled=!1,!f.error){e.next=17;break}return this.$initiateNotification("error","Network error",f.message),e.abrupt("return");case 17:if(0!=(v=f.result.data.CreateBusinessCategory).success){e.next=21;break}return this.$initiateNotification("error","",v.message),e.abrupt("return");case 21:this.$initiateNotification("success","",v.message);case 22:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})}),watch:{selectedCategoryId:function(){var e,t=this.selectedCategoryId,r=k(this.returnCategories);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.categoryId==t){this.subcategoriesUnderCategories="",this.subcategoriesUnderCategories=n.subcategory;break}}}catch(e){r.e(e)}finally{r.f()}}},created:function(){this.allCategories="",this.GetBusinessDataFromStore(),this.GetAllCategories()},mounted:function(){this.pageLoader=!1}},$=r(7),component=Object($.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"business"},[n("div",{staticClass:"body-container"},[n("TOPHEADER"),e._v(" "),n("nuxt"),e._v(" "),n("div",{staticClass:"content-container"},[n("SIDENAV"),e._v(" "),n("nuxt"),e._v(" "),n("div",{staticClass:"content-area grey-bg-color"},[e.pageLoader?n("PAGELOADER"):e._e(),e._v(" "),n("nuxt"),e._v(" "),n("div",{staticClass:"main-content"},[e._m(0),e._v(" "),n("div",{staticClass:"product-categories-container"},[n("div",{staticClass:"card create-cat-card-layout"},[n("div",{staticClass:"form-control"},[n("select",{staticClass:"input-form",attrs:{id:"selectCategoryDropDown"},on:{change:function(t){return e.onSelectCategory(t)}}},[n("option",{attrs:{selected:""}},[e._v("Select a product category")]),e._v(" "),e._l(e.returnCategories,(function(t){return n("option",{key:t.categoryId,domProps:{value:t.categoryId}},[e._v(e._s(t.categoryName))])}))],2)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.subcategoriesUnderCategories,expression:"subcategoriesUnderCategories"}],staticClass:"form-control mg-bottom-32"},[n("label",{staticClass:"form-label",attrs:{for:"businessCategory"}},[e._v("Select one or more subcategories")]),e._v(" "),n("div",{staticClass:"chip-container"},e._l(e.returnSubcategoriesOfCategory,(function(t){return n("div",{key:t.subcategoryId,staticClass:"chip",attrs:{href:"#"},on:{click:function(r){return e.addSelectedSubcategory(t.subcategoryName,t.subcategoryId)}}},[e._v(e._s(t.subcategoryName))])})),0)]),e._v(" "),e._m(1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.returnVendorSelectedSubcategories.length>0,expression:"returnVendorSelectedSubcategories.length > 0"}],staticClass:"card selected-cat-card "},[e._m(2),e._v(" "),n("div",{staticClass:"selected-cat-container"},[n("div",{staticClass:"selected-cat"},[n("div",{staticClass:"header"},[n("h3",[e._v(e._s(e.selectedCategoryName))]),e._v(" "),n("button",{staticClass:"btn btn-white  btn-small",attrs:{type:"button"},on:{click:function(t){return e.removeCategory()}}},[e._v("Remove category")])]),e._v(" "),n("div",{staticClass:"form-label mg-bottom-24"},[e._v("Tap/click to remove subcategory")]),e._v(" "),n("div",{staticClass:"chip-container"},e._l(e.returnVendorSelectedSubcategories,(function(t,o){return n("div",{key:o,staticClass:"chip",on:{click:function(t){return e.removeSubcategoryFromVendorSubcategories(o)}}},[e._v(e._s(t.subcategoryName)+" \n                                                "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14"}},[n("use",{attrs:{"xlink:href":r(13)+"#chipDelete"}})])])})),0)])]),e._v(" "),n("div",{staticClass:"action-area"},[n("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button",id:"submitCategory"},on:{click:function(t){return e.submitCategory()}}},[e._v("\n                                        Submit product category\n                                        "),e._m(3)])])])])]),e._v(" "),n("BOTTOMNAV"),e._v(" "),n("nuxt")],1)],1),e._v(" "),n("ADDCATEGORIESMODAL"),e._v(" "),n("nuxt")],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-header"},[t("h4",[this._v("Add product categories")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-control"},[t("label",{staticClass:"form-label",attrs:{for:"businessCategory"}},[this._v("I cannot find my product's category/subcategory")]),this._v(" "),t("div",{staticClass:"create-footer-options"},[t("button",{staticClass:"btn btn-white btn-small",attrs:{type:"button","data-trigger":"modal","data-target":"createCategoryModal"}},[this._v("Create category/subcategories")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h4",[this._v("Selected product categories")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loader-action"},[t("span",{staticClass:"loader"})])}],!1,null,null,null);t.default=component.exports}}]);